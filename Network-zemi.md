# ネットワークゼミ メモ
###### tags: `network`
###### 作成者:足立 渓
初版:2021/05/13 更新:2021/05/15

## LDAP(Lightweight Directory Access Protocol)
### 説明
ユーザーやコンピュータ情報を集中管理できる。
ユーザーID/パスワードといった認証情報を保存、参照で利用できる。
LDAPは通信内容は平文で暗号化されていない。
安全性を高めるには、SSL/TLSを利用する必要がある。
windowsのActive Directoryなどで広い分野で使われている。

ディレクトリサービスは一般的なデータベースとは異なる特徴がある。
一般的なデータベースはデータの追加・削除が頻繁にある。
一般的なデータベースでは顧客・商品情報管理のような高頻度での更新されるデータを扱う。
LDAPではデータ更新が少なく、検索を重視するプロトコルです。
アドレス帳のような、毎日検索が行われ、更新は年に1度などの更新頻度が低いという場合に利用される。

グローバルでサービスを使う場合には、分散型のディレクトリサービスが用いられる。
DNSが分散型のディレクトリサービスです。

#### LDAP使用例　大学の情報学習室
生徒50人、端末50台でログインアカウントが必要になる。
サーバー管理者は生徒の入学式の時にすべての端末にアカウント、パスワード情報を作成しなければなりません。useraddなどを使ったテンプレートを使用して作る。しかし、生徒が端末Aでパスワードを変更した場合、次の授業で同じ席に座るとは限らない。違う端末Bではパスワードは変更前のままとなっている。
このような場合に、パスワードやホームディレクトリを共有し、集中管理できるのがLDAPです。

### @IT　引用
ユーザやコンピュータ情報を集中管理する。
共通の認証情報を用いたログイン環境でのユーザID/パスワードといった認証情報の保存、参照目的で利用される。
LDAPでは通信内容は平文で暗号化されていない。
安全性を高めるために、SSL/TLSなどと併用して利用する場合がある。
LDAPクライアントは様々なアプリケーションやOSで実装され、広い分野で活用されている。

### Gihyo　引用
古くから存在するプロトコルです。
一言でいうとデータベースサーバ。
LDAPはデータ追加や削除よりも、検索を重視したプロトコルです。
顧客、商品情報管理のように高頻度に更新されるデータは苦手です。
アドレス帳のような、毎日検索は行われるが、更新はまれという場合に効力を発揮する。


### ThinkIT 引用
ディレクトリサービスとは、ネットワークを利用するユーザ名やマシン名など様々な情報を集中管理するためのサービスです。
ユーザ名などのキーとなる値から様々な情報を検索することが可能です。
グローバルでサービス提供する場合には、分散型のディレクトリサービスが用いられ、DNSが分散型のディレクトリサービスです。

ディレクトリサービスは特殊なデータベースのため、一般的なデータベースとは異なった特徴がある。


#### ディレクトリサービスの特徴
* 読み取りが高速
* 分散型の情報格納モデル
* 高度な検索機能を持つ

ディレクトリサービスの場合は、一般的なデータベースのように読み書きが同じ頻度で発生することがまれです。
読み込みはするが、書き込みはたまにしかしない。
高度に検索することが可能。

### LDAPサーバ機能実装例
* MicrosoftのActive Directory
* OpenLDAP
* Sun Microsystems SunONE Directory Server
* Red Hat Directory Server


## DNS 
### @IT
DNSとはホスト名とIPアドレスを関連づけること。
名前空間の階層化と権限委譲による分散データベース。

TCP/IPのネットワークとしてのインターネットでは、すべてのホストはIPアドレスで区別される。
数値で表記されるので、人間にとっては覚えにくい。
わかりやすい名前でアクセスできるように対応表が用意されました。
しかし、インターネットにアクセスするホストが増えると、人手でメンテナンスするのは不可能です。
名前空間を階層化するとともに分散型のデータベースとしてDNSサーバーが導入されました。

名前空間の階層化は、ピリオドで区切るということです。
右から左に行くにつれて範囲が狭くなっていきます。
ドメインごとに一意の名前を使いさえすれば、インターネット全体を通して名前が重複せずに済みます。

階層に対応したサーバを用意することで、権限の委譲も簡単になります。
サーバはインターネット上のホストすべてを知る必要はなく、下位のドメインに関する権限を持ったサーバを知るだけで済みます。
知らない情報に対してはルートネームサーバを視点としたたらい回し処理をする。

### SMART BIND
#### DNS 概要
インターネットでは、すべてのホストをIPアドレスで区別している。
IPアドレスは、インターネット上の住所のようなものです。
人間にとって扱いやすいものではない。
IPアドレスをコンピュータ名に置き換え、ホストを簡単に特定するための別名です。
DNSはドメイン名に対応した階層構造になっている。
最上位に位置するDNSサーバをルートサーバと呼びます。
ルートサーバから、下位のDNSサーバへとホスト名の問い合わせが行われる。
最終的にホスト名に対応するIPアドレスが返される。

#### BIND概要(Berkeley Internet Name Domain)
* ドメイン名からIPアドレスを引く正引き辞書
* IPアドレスからドメイン名を捜す逆引き辞書

#### DNSサーバ　役割・機能
* プライマリDNSサーバ
    * ドメイン内のすべての情報を保持しているメインのサーバ
* セカンダリDNSサーバ
    * ドメイン内のすべての情報を保持しているサブのサーバ
* キャッシュDNSサーバ
    * クライアントからの問い合わせに対して、指定されたDNSサーバへの問い合わせを転送します。一度あった問い合わせを一時的にキャッシュ（保持）します。
    * 次回からはキャッシュから回答する。
    * 大規模なプライマリやセカンダリの負荷を軽減するメリットがある。
* スレーブサーバ
    * プライマリサーバとほぼ同様のデータベースを保持しています。
    * 自分自身で解決できない要求があった場合に指定された特定のサーバーに問い合わせをする。

## MailServer 
メールの送信や配送を行うSMTPサーバー
ユーザーがメールを受信するための機能を提供するPOP3サーバ

### 仕組み
メールアドレスのドメイン名から宛先メールサーバのインターネット上の住所にあたるIPアドレスを割り出す、DNSサーバ。

ユーザーはメールソフト等でメールを作成し、送信します。
SMTPサーバはユーザーからのメールを受け取った時、DNSサーバにドメイン部分から配信先メールサーバを割り出し、サーバに対してメールを配送します。

POP3サーバの役割は郵便のシステムでは私書箱の運用と同じと考えられます。
SMTPサーバによって転送されたメールは最終的にPOP３サーバへ渡されます。
1つ1つのメールアドレスごとにメールボックスが用意されいます。
そこに配送されたメールが保管されます。

#### IMAPサーバ
メールをサーバに置いたまま保管するIMAPサーバ。
IMAP接続を行うと、パソコンやローカルにメールソフトではなくサーバにメールが保管されるので、スマホなど複数の端末で、同じメールが読めるようになります。

SMTP　IETFにおいて標準化されたメール転送のためのプロトコル。　RFC772 1980年9月にRFC772において提案され、2回の改訂を経て1982年8月に簡易メール転送プロトコルRFC821として標準になった。

SMTPはメールサーバ間の返送だけでなく、電子メールクライアントからメールサーバに送信するときにも使われる。
スパムなどを防ぐために現在では転送(transfer)と提出(submission)として分けて考えられる。

メール転送の通信はポート番号25を使う、メール提出ではポート番号587で認証を必須とし暗号化する。

本来テキストベースのプロトコルであり、全ての要求・応答メッセージやメールデータが7ビットASCIIでなければならないという制限があった。英語以外の言語やバイナリファイルを扱う需要があった。
電子メールにMIMEという規格が作られ、SMTP自体にも8ビットで転送する拡張が標準化された。

![](https://bit.ly/3w23vte)

#### Postfix

## WebServer

### URL 参考
#### LDAP
[とは atmarkIT](https://bit.ly/3hoL0v4)
[Gihyo](https://gihyo.jp/admin/serial/01/ldap/0001)

#### DNS
[atmarkIT](https://www.atmarkit.co.jp/ait/articles/0012/13/news001.html)

[SMART BIND 概要](https://rfs.jp/server/bind/01bind/01-14.html)

#### メール
[かごや　仕組み・役割](https://www.kagoya.jp/howto/rentalserver/mailserver/)

[Wiki SMTP](https://ja.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)